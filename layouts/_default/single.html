{{ define "main" }}

<article>
  <header class="mb-20">
    <h1 class="!my-0 pb-2.5">{{ .Title }}</h1>

    {{ if ne .Type "page" }}
    <div class="text-sm opacity-60">
      {{ if .Date }}
      <time>{{ .Date | time.Format ":date_medium" }} {{ .Date | time.Format ":time_short" }}</time>
      {{ end }}<!---->
      {{ if or .Params.Author site.Author.name }}
      <span class="mx-1">&middot;</span>
      <span>{{ .Params.Author | default site.Author.name }}</span>
      {{ end }}
    </div>
    {{ end }}
  </header>

  <section>{{ .Content }}</section>

  <!-- Post Tags -->
  {{ if .Params.tags }}
  <footer class="mt-12 flex flex-wrap">
    {{ range .Params.tags }} {{ $href := print (absURL "tags/") (urlize .) }}
    <a class="mr-1.5 mb-1.5 rounded-lg bg-black/[3%] px-5 py-2 no-underline dark:bg-white/[8%]" href="{{ $href }}">{{ .
      }}</a>
    {{ end }}
  </footer>
  {{ end }}

  <!-- Post Nav -->
  {{ $pages := where site.RegularPages "Type" "in" site.Params.mainSections }}<!---->
  {{ if and (gt (len $pages) 1) (in $pages . ) }}
  <nav class="mt-24 flex rounded-lg bg-black/[3%] p-1.5 text-lg dark:bg-white/[8%]">
    {{ with $pages.Next . }}
    <a class="flex w-1/2 items-center rounded-md p-6 pr-3 no-underline hover:bg-black/[2%]"
      href="{{ .Permalink }}"><span class="mr-1.5">←</span><span>{{ .Name }}</span></a>
    {{ end }}<!---->
    {{ with $pages.Prev . }}
    <a class="ml-auto flex w-1/2 items-center justify-end rounded-md p-6 pl-3 no-underline hover:bg-black/[2%]"
      href="{{ .Permalink }}"><span>{{ .Name }}</span><span class="ml-1.5">→</span></a>
    {{ end }}
  </nav>
  {{ end }}

  <!-- Disqus -->
  {{ if and site.DisqusShortname (not (eq .Params.comments false)) }}
  <div class="mt-24" id="disqus_thread"></div>
  <script>
    const disqusShortname = '{{ site.DisqusShortname }}';
    const script = document.createElement('script');
    script.src = 'https://' + disqusShortname + '.disqus.com/embed.js';
    script.setAttribute('data-timestamp', +new Date());
    document.head.appendChild(script);
  </script>
  {{ end }}

  <!-- GraphComment -->
  {{ if and site.Params.graphCommentId (not (eq .Params.comments false)) }}
  <div class="mt-24" id="graphcomment"></div>
  <script type="text/javascript">
    var __semio__params = {
      graphcommentId: '{{ site.Params.graphCommentId  }}',
      behaviour: {
        //  uid: "...",
      },
      // configure your variables here
    };

    function __semio__onload() {
      __semio__gc_graphlogin(__semio__params);
    }

    (function () {
      var gc = document.createElement('script');
      gc.type = 'text/javascript';
      gc.async = true;
      gc.onload = __semio__onload;
      gc.defer = true;
      gc.src =
        'https://integration.graphcomment.com/gc_graphlogin.js?' + Date.now();
      (
        document.getElementsByTagName('head')[0] ||
        document.getElementsByTagName('body')[0]
      ).appendChild(gc);
    })();
  </script>
  {{ end }}

  <button type="button" class="twitter" onclick="tweet()" style="padding: 5px;">
    <div>
      <svg x="0px" y="0px" viewBox="0 0 27 27" xml:space="preserve">
        <path fill="currentColor"
          d="M23.1,8.7c0,0.2,0,0.5,0,0.7c0,8-6.4,14.5-14.4,14.6c-0.1,0-0.1,0-0.2,0c-2.8,0-5.5-0.8-7.9-2.3c0.4,0,0.8,0.1,1.2,0.1 c2.3,0,4.6-0.8,6.3-2.1C6,19.6,4,18.2,3.3,16c0.3,0.1,0.7,0.1,1,0.1c0.5,0,0.9-0.1,1.4-0.2c-2.4-0.5-4.1-2.6-4.1-5.1v-0.1 c0.7,0.4,1.5,0.6,2.3,0.7c-1.5-1-2.2-2.5-2.2-4.3c0-0.9,0.2-1.8,0.7-2.6C5,7.8,8.8,9.7,13,9.9c-0.1-0.4-0.1-0.8-0.1-1.2 c0-2.8,2.2-5.2,5.2-5.2c1.5,0,2.8,0.6,3.8,1.7C23,5,24,4.6,25,4.1c-0.4,1.2-1.2,2.1-2.2,2.8c1-0.1,2-0.4,2.9-0.8 C24.9,7.1,24,7.9,23.1,8.7L23.1,8.7z">
        </path>
      </svg>
      <p style="width: 10px;"></p>
      <p>Tweet</p>
    </div>
    <button>

      <button type="button" class="top" id="pageTop" style="padding: 5px;">
        <div>
          <p>Top</p>
        </div>
        <button>

          <script>
            const pageTop = document.getElementById('pageTop')
            pageTop.addEventListener('click', scrollToTop)

            function scrollToTop() {
              window.scroll({ top: 0, behavior: 'smooth' })
            }

            function tweet() {
              const TWITTER_URL = 'https://twitter.com/intent/tweet'
              const TWEET_URL = 'url=https://www.webposts.jp'
              const TWEET_TITLE = document.title
              const TWEET_TEXT = ''
              const TWEET_HASH_TAG = 'hashtags=webpostsJP'
              const TARGET_PATH = location.pathname

              window.open(`${TWITTER_URL}?${TWEET_URL}${TARGET_PATH}&text=${TWEET_TEXT}${TWEET_TITLE}&${TWEET_HASH_TAG}`, '_blank')
            }
          </script>
</article>

{{ end }}
